remove.packages("leafem", lib="~/R/win-library/4.0")
library(devtools)
devtools::install_github("r-spatial/leafem")
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$OpenTopoMap) #%>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) #%>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
lat = rcdata$LATITUDE,
group = "markers")
?addCircleMarkers
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),#"#ffffff",
fillOpacity = 0.9,
label = rcdata$SOC_field
)
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = "#ffffff", #pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
)
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
) %>%
### Add legend
addLegend("bottomright",
group="SOC_points",
pal=pal,
values=rcdata$SOC_field,
title="SOC (%)",
layerId="pointLegend")
# Load Reynolds Creek boundary shapefile
rc_boundary <- readOGR("./map_data/RCrk_Boundary.shp")
rc_boundary
rc_boundary
# Set shapefile projection
rc_boundary <- spTransform(rc_boundary, CRS("+init=epsg:4326")) #Find epsg #'s at: https://epsg.io/
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
# Load Reynolds Creek boundary shapefile
rc_boundary <- readOGR("./map_data/RCrk_Boundary.shp")
# Set shapefile projection
rc_boundary <- spTransform(rc_boundary, CRS("+init=epsg:4326")) #Find epsg #'s at: https://epsg.io/
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
) %>%
### Add legend
addLegend("bottomright",
group="SOC_points",
pal=pal,
values=rcdata$SOC_field,
title="SOC (%)",
layerId="pointLegend") %>%
### Add shapefile
addPolygons(
data=rc_boundary,
group = "rcrk_boundary",
stroke = TRUE,
color = "black",
weight = 5,
opacity = 1,
fill = TRUE,
fillColor = "blue",
fillOpacity = 0.1,
smoothFactor = 1
)
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
# Load Reynolds Creek boundary shapefile
rc_boundary <- readOGR("./map_data/RCrk_Boundary.shp")
# Set shapefile projection
rc_boundary <- spTransform(rc_boundary, CRS("+init=epsg:4326")) #Find epsg #'s at: https://epsg.io/
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add shapefile
addPolygons(
data=rc_boundary,
group = "rcrk_boundary",
stroke = TRUE,
color = "black",
weight = 5,
opacity = 1,
fill = TRUE,
fillColor = "blue",
fillOpacity = 0.1,
smoothFactor = 1
) %>%
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
) %>%
### Add legend
addLegend("bottomright",
group="SOC_points",
pal=pal,
values=rcdata$SOC_field,
title="SOC (%)",
layerId="pointLegend")
# Load raster image
rc_TSOI <- raster("./map_data/tsoi_est2_3857.tif")
getValues(rc_TSOI)
# Create raster color palette
TSOI_pal <- colorBin(palette = c("#05475e", "#faff78", "#ff9a00", "#ff3500"),
domain = getValues(rc_TSOI),
bins = c(5:15),
pretty = TRUE,
na.color = "transparent")
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
# Load Reynolds Creek boundary shapefile
rc_boundary <- readOGR("./map_data/RCrk_Boundary.shp")
# Set shapefile projection
rc_boundary <- spTransform(rc_boundary, CRS("+init=epsg:4326")) #Find epsg #'s at: https://epsg.io/
# Load raster image
rc_TSOI <- raster("./map_data/tsoi_est2_3857.tif")
# Create raster color palette
TSOI_pal <- colorBin(palette = c("#05475e", "#faff78", "#ff9a00", "#ff3500"),
domain = getValues(rc_TSOI),
bins = c(5:15),
pretty = TRUE,
na.color = "transparent")
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add shapefile
addPolygons(
data=rc_boundary,
group = "rcrk_boundary",
stroke = TRUE,
color = "black",
weight = 5,
opacity = 1,
fill = TRUE,
fillColor = "blue",
fillOpacity = 0.1,
smoothFactor = 1
) %>%
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
) %>%
### Add legend
addLegend("bottomright",
group="SOC_points",
pal=pal,
values=rcdata$SOC_field,
title="SOC (%)",
layerId="pointLegend") %>%
### Add raster image
addRasterImage(rc_TSOI,
#maxBytes = 5000000,
colors = TSOI_pal,
opacity = 0.5,
group = "TSOI") #%>%
library(dplyr)
library(leaflet)
library(rgdal)
library(raster)
# Set working drive
setwd("C:/github/BIOL_6692_ISU/Lecture 7 - Leaflet map")
# Load tabular dataset with lat & long data in decimal degrees
rcdata <- read.csv("RCrk_data.csv", as.is=T)
# Create a color palette for map points
pal <- colorNumeric(palette = "RdBu", domain = c(0:10), na.color = "#ffffff")
# Load Reynolds Creek boundary shapefile
rc_boundary <- readOGR("./map_data/RCrk_Boundary.shp")
# Set shapefile projection
rc_boundary <- spTransform(rc_boundary, CRS("+init=epsg:4326")) #Find epsg #'s at: https://epsg.io/
# Load raster image
rc_TSOI <- raster("./map_data/tsoi_est2_3857.tif")
# Create raster color palette
TSOI_pal <- colorBin(palette = c("#05475e", "#faff78", "#ff9a00", "#ff3500"),
domain = getValues(rc_TSOI),
bins = c(5:15),
pretty = TRUE,
na.color = "transparent")
#####################################
# Begin Leaflet map
#####################################
### Initiate a leaflet map
leaflet() %>%
###Add a basemap
addProviderTiles(providers$Esri.NatGeoWorldMap) %>% #Examples: https://leaflet-extras.github.io/leaflet-providers/preview/
### Add markers
#addMarkers(lng = rcdata$LONGITUDE, # Add markers from lat, long data columns
#           lat = rcdata$LATITUDE,
#           group = "markers")
### Add shapefile
addPolygons(
data=rc_boundary,
group = "rcrk_boundary",
stroke = TRUE,
color = "black",
weight = 5,
opacity = 1,
fill = TRUE,
fillColor = "blue",
fillOpacity = 0.1,
smoothFactor = 1
) %>%
### Add points
addCircleMarkers(
lng = rcdata$LONGITUDE,
lat = rcdata$LATITUDE,
radius = 10,
group = "SOC_points",
stroke = TRUE,
color = "#000000",
weight = 2,
opacity = 0.9,
fill = TRUE,
fillColor = pal(rcdata$SOC_field),
fillOpacity = 0.9,
label = rcdata$SOC_field
) %>%
### Add legend
addLegend("bottomright",
group="SOC_points",
pal=pal,
values=rcdata$SOC_field,
title="SOC (%)",
layerId="pointLegend") %>%
### Add raster image
addRasterImage(rc_TSOI,
maxBytes = 5000000,
colors = TSOI_pal,
opacity = 0.7,
group = "TSOI") %>%
### Add raster colorscale legend
addLegend("bottomleft",
group="TSOI",
pal=TSOI_pal,
values=getValues(rc_TSOI),
title="Mean Annual<br>Soil Temperature (°C)", #degree circle = ALT+0176
layerId="TSOI_Legend")
